diff --git a/tmp/502b7710-4d75-4a00-821d-f4513d498b71_buggy.java b/tmp/34a4bcee-b777-42e0-8206-8fb98f3e961b_fixed.java
index e69de29..c19fe1c 100644
--- a/tmp/502b7710-4d75-4a00-821d-f4513d498b71_buggy.java
+++ b/tmp/34a4bcee-b777-42e0-8206-8fb98f3e961b_fixed.java
@@ -0,0 +1,17 @@
+private String generateJsonWithQuotes(JsonFactory jsonFactory, Map<String, Object> map, boolean quoteFieldNames) throws IOException {
+    StringWriter writer = new StringWriter();
+    JsonGenerator jsonGenerator = jsonFactory.createGenerator(writer);
+
+    // Set the quoting based on the provided parameter
+    jsonGenerator.configure(JsonGenerator.Feature.QUOTE_FIELD_NAMES, quoteFieldNames);
+
+    jsonGenerator.writeStartObject();
+    for (Map.Entry<String, Object> entry : map.entrySet()) {
+        jsonGenerator.writeFieldName(entry.getKey());
+        jsonGenerator.writeObject(entry.getValue());
+    }
+    jsonGenerator.writeEndObject();
+    jsonGenerator.close();
+
+    return writer.toString();
+}
\ No newline at end of file
