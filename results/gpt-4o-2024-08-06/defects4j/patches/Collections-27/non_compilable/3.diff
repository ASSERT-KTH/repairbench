diff --git a/tmp/bfbba6ba-4d27-4df5-897e-dd0e800679ad_buggy.java b/tmp/45393797-66f8-4c8e-b8f7-a4ce611103ec_fixed.java
index e69de29..a538748 100644
--- a/tmp/bfbba6ba-4d27-4df5-897e-dd0e800679ad_buggy.java
+++ b/tmp/45393797-66f8-4c8e-b8f7-a4ce611103ec_fixed.java
@@ -0,0 +1,7 @@
+@Override
+public Object readResolve() throws ObjectStreamException {
+    if (valueClazz != null && !Collection.class.isAssignableFrom(valueClazz)) {
+        throw new UnsupportedOperationException("Deserialized class is not safe: " + valueClazz);
+    }
+    return this;
+}
\ No newline at end of file
