diff --git a/tmp/dff000f2-2c2b-4c38-9a33-25885b42bf99_buggy.java b/tmp/c6779371-f126-4936-82dc-793577ee9b58_fixed.java
index e69de29..a538748 100644
--- a/tmp/dff000f2-2c2b-4c38-9a33-25885b42bf99_buggy.java
+++ b/tmp/c6779371-f126-4936-82dc-793577ee9b58_fixed.java
@@ -0,0 +1,7 @@
+@Override
+public Object readResolve() throws ObjectStreamException {
+    if (valueClazz != null && !Collection.class.isAssignableFrom(valueClazz)) {
+        throw new UnsupportedOperationException("Deserialized class is not safe: " + valueClazz);
+    }
+    return this;
+}
\ No newline at end of file
