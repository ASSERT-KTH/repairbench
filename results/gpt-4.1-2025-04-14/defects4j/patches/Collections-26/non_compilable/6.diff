diff --git a/tmp/573c565e-a1c0-4aa2-a64b-bfa9f161bc53_buggy.java b/tmp/5f24dcb0-5271-4fff-b033-cfdde409085d_fixed.java
index a667cbe..8d31736 100644
--- a/tmp/573c565e-a1c0-4aa2-a64b-bfa9f161bc53_buggy.java
+++ b/tmp/5f24dcb0-5271-4fff-b033-cfdde409085d_fixed.java
@@ -1,10 +1,29 @@
     /**
      * Recalculate the hash code after deserialization. The hash code of some
      * keys might have change (hash codes based on the system hash code are
      * only stable for the same process).
      * @return the instance with recalculated hash code
      */
     private Object readResolve() {
         calculateHashCode(keys);
+        try {
+            Field hashCodeField = null;
+            Class<?> clazz = this.getClass();
+            // Try to find the hashCode field in this class or its superclasses
+            while (clazz != null) {
+                try {
+                    hashCodeField = clazz.getDeclaredField("hashCode");
+                    break;
+                } catch (NoSuchFieldException e) {
+                    clazz = clazz.getSuperclass();
+                }
+            }
+            if (hashCodeField != null) {
+                hashCodeField.setAccessible(true);
+                hashCodeField.setInt(this, calculateHashCode(keys));
+            }
+        } catch (Exception e) {
+            // Ignore - best effort
+        }
         return this;
     }
\ No newline at end of file
